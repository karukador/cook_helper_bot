## Размещение бота на сервере

### Что вам понадобится:

- Приватный SSH ключ
- Имя пользователя сервера
- IP сервера
- Ссылка для клонирования бота, в данном случае: `git clone https://github.com/karukador/cook_help_bot`

### Шаг 1. Подключение к удаленному серверу

- Получите приватный ключ для доступа к серверу
- Используя ключ, подключитесь к удаленному серверу с помощью команды:
  ```Bash
  ssh -i "\путь\к\ключу" <username>@<ip>
  ```
- При первом подключении подтвердите свои действия командой `yes`

### Шаг 2. Подготовка сервера к запуску проекта

- Установите пакетный менеджер `pip`:
  ```Bash
  sudo apt install python3-pip -y
  ```
- Если при установке появится окно - нажмите Tab, затем Enter
- Установите утилиту `tmux` для запуска проекта в фоне:
  ```Bash
  sudo apt install tmux -y
  ```
- Если при установке появится окно - нажмите Tab, затем Enter

### Шаг 3. Установка и запуск бота на сервере

- Перейдите/создайте и перейдите в директорию, в которой хотите разместить бота на сервере (необязательно)
- Выполните команду клонирования репозитория:
  ```Bash
  git clone https://github.com/karukador/cook_help_bot
  ```
- Перейдите в склонированный проект командой:
  ```Bash
  cd SPEECHKIT_BOT
  ```
- Установите все необходимые библиотеки с помощью `pip` и нашего файлика `requirements.txt`:
  ```Bash
  pip install -r requirements.txt
  ```
- Перейдите в папку `creds`:
  ```Bash
  cd creds
  ```
- Зайдите в файл `folder_id.txt`:
  ```Bash
  nano folder_id.txt  
  ```
- В открытом окне запишите ваш folder id
- Выйдите, используя сочетание клавиш `CTRL+X`
- Для подтверждения изменений нажмите `y`
- Повторите аналогичные действия для файла `bot_token.txt`
- Запустите бота командой:
  ```Bash
  python3 bot.py  
  ```
- Такой запуск продлится до закрытия терминала
- Остановите бота сочетанием клавиш `CTRL+C`

### Шаг 4. Запуск бота в фоне с помощью tmux

- Запустите установленную на 2 шаге утилиту tmux c помощью команды:
  ```Bash
  tmux
  ```
- В новом открывшемся терминале снова запустите бота командой:
  ```Bash
  python3 bot.py
  ```
- Теперь можно закрыть терминал - бот продолжит работу.

### Шаг 5. Остановка бота запущенного с помощью tmux

Чтобы выключить запущенного через tmux бота, нужно заново подключиться по ssh к удалённой машине и выполнить команду

```bash
tmux ls
```

Она выведет все активные запуски tmux, например:

```bash
0: 1 windows (created Sun Jan 21 20:31:54 2024)
```
- Эта запись показывает, во сколько был запущен бот. После этого можно выполнить команду, чтобы выключить бота с заданным номером:
```bash
tmux kill-session -t <номер_бота>
```
- Если был запущен только один бот, то его выключит команда:
```bash
tmux kill-session -t 0
```
